{"is_source_file": true, "format": "Python", "description": "Main backend source file for an AI Test Automation Platform. It sets up a FastAPI application with endpoints for health checks, CRUD operations for test cases, and test execution simulation. Includes database configuration, ORM models, API schemas, and middleware setup.", "external_files": ["sqlmodel", "fastapi", "fastapi.middleware.cors", "pydantic", "sqlalchemy.orm", "os", "time", "random"], "external_methods": ["fastapi.FastAPI", "fastapi.HTTPException", "fastapi.Depends", "fastapi.middleware.cors.CORSMiddleware", "pydantic.BaseModel", "sqlalchemy.orm.sessionmaker", "sqlmodel.SQLModel", "sqlmodel.Field", "sqlmodel.Session", "sqlmodel.create_engine", "sqlmodel.select"], "published": ["health", "list_tests", "create_test", "update_test", "delete_test", "run_tests"], "classes": [{"name": "TestCaseORM", "description": "ORM model representing the persistent storage schema for test cases, mapped to a database table."}, {"name": "TestCase", "description": "Pydantic model defining the API schema for test case data exchanged with clients."}, {"name": "TestCaseCreate", "description": "Pydantic model for the payload to create new test cases."}, {"name": "TestCaseUpdate", "description": "Pydantic model for updating existing test cases, allowing optional fields."}, {"name": "RunRequest", "description": "Pydantic model for the request payload to run tests by IDs."}, {"name": "RunResult", "description": "Pydantic model representing the result of a test execution."}], "methods": [{"name": "get_session()", "description": "Dependency generator that provides a SQLAlchemy session per API request.", "scope": "", "scopeKind": ""}, {"name": "on_startup()", "description": "Event handler that creates database tables when the application starts.", "scope": "", "scopeKind": ""}, {"name": "TestCase _to_api(tc: TestCaseORM)", "description": "Converts ORM model instances to API schema models for response.", "scope": "", "scopeKind": ""}, {"name": "str _from_steps(steps: Optional[List[str]])", "description": "Serializes a list of steps into a JSON string for storage.", "scope": "", "scopeKind": ""}, {"name": "health()", "description": "Healthcheck endpoint returning service status.", "scope": "", "scopeKind": ""}, {"name": "list_tests(session: Session = Depends(get_session))", "description": "Endpoint to list all stored test cases.", "scope": "", "scopeKind": ""}, {"name": "create_test(payload: TestCaseCreate, session: Session = Depends(get_session))", "description": "Endpoint to create a new test case.", "scope": "", "scopeKind": ""}, {"name": "update_test(test_id: int, payload: TestCaseUpdate, session: Session = Depends(get_session))", "description": "Endpoint to update an existing test case.", "scope": "", "scopeKind": ""}, {"name": "delete_test(test_id: int, session: Session = Depends(get_session))", "description": "Endpoint to delete a test case.", "scope": "", "scopeKind": ""}, {"name": "run_tests(req: RunRequest, session: Session = Depends(get_session))", "description": "Endpoint to simulate running selected tests and returning results.", "scope": "", "scopeKind": ""}, {"name": "str _default_db_url()", "scope": "", "scopeKind": "", "description": "unavailable"}], "calls": ["SQLModel.metadata.create_all", "session.exec", "session.add", "session.commit", "session.refresh", "session.get", "session.delete"], "search-terms": ["FastAPI backend", "test case CRUD", "test execution simulation", "SQLModel ORM", "API schemas", "database setup", "CORS middleware"], "state": 2, "file_id": 15, "knowledge_revision": 41, "git_revision": "f6c2850011191c3edf706f6eb8860cd5c0d0f5b1", "revision_history": [{"35": "f6c2850011191c3edf706f6eb8860cd5c0d0f5b1"}, {"41": "f6c2850011191c3edf706f6eb8860cd5c0d0f5b1"}], "ctags": [{"_type": "tag", "name": "DATABASE_URL", "path": "/home/kavia/workspace/code-generation/ai-test-automation-platform-6921-6930/backend/main.py", "pattern": "/^DATABASE_URL = _default_db_url()$/", "language": "Python", "kind": "variable"}, {"_type": "tag", "name": "RunRequest", "path": "/home/kavia/workspace/code-generation/ai-test-automation-platform-6921-6930/backend/main.py", "pattern": "/^class RunRequest(BaseModel):$/", "language": "Python", "kind": "class"}, {"_type": "tag", "name": "RunResult", "path": "/home/kavia/workspace/code-generation/ai-test-automation-platform-6921-6930/backend/main.py", "pattern": "/^class RunResult(BaseModel):$/", "language": "Python", "kind": "class"}, {"_type": "tag", "name": "SQLField", "path": "/home/kavia/workspace/code-generation/ai-test-automation-platform-6921-6930/backend/main.py", "pattern": "/^from sqlmodel import SQLModel, Field as SQLField, Session, create_engine, select$/", "language": "Python", "kind": "unknown", "nameref": "unknown:Field"}, {"_type": "tag", "name": "TestCase", "path": "/home/kavia/workspace/code-generation/ai-test-automation-platform-6921-6930/backend/main.py", "pattern": "/^class TestCase(BaseModel):$/", "language": "Python", "kind": "class"}, {"_type": "tag", "name": "TestCaseCreate", "path": "/home/kavia/workspace/code-generation/ai-test-automation-platform-6921-6930/backend/main.py", "pattern": "/^class TestCaseCreate(BaseModel):$/", "language": "Python", "kind": "class"}, {"_type": "tag", "name": "TestCaseORM", "path": "/home/kavia/workspace/code-generation/ai-test-automation-platform-6921-6930/backend/main.py", "pattern": "/^class TestCaseORM(SQLModel, table=True):$/", "language": "Python", "kind": "class"}, {"_type": "tag", "name": "TestCaseUpdate", "path": "/home/kavia/workspace/code-generation/ai-test-automation-platform-6921-6930/backend/main.py", "pattern": "/^class TestCaseUpdate(BaseModel):$/", "language": "Python", "kind": "class"}, {"_type": "tag", "name": "_default_db_url", "path": "/home/kavia/workspace/code-generation/ai-test-automation-platform-6921-6930/backend/main.py", "pattern": "/^def _default_db_url() -> str:$/", "language": "Python", "typeref": "typename:str", "kind": "function", "signature": "()"}, {"_type": "tag", "name": "_from_steps", "path": "/home/kavia/workspace/code-generation/ai-test-automation-platform-6921-6930/backend/main.py", "pattern": "/^def _from_steps(steps: Optional[List[str]]) -> str:$/", "language": "Python", "typeref": "typename:str", "kind": "function", "signature": "(steps: Optional[List[str]])"}, {"_type": "tag", "name": "_to_api", "path": "/home/kavia/workspace/code-generation/ai-test-automation-platform-6921-6930/backend/main.py", "pattern": "/^def _to_api(tc: TestCaseORM) -> TestCase:$/", "language": "Python", "typeref": "typename:TestCase", "kind": "function", "signature": "(tc: TestCaseORM)"}, {"_type": "tag", "name": "allowed_origin_regex", "path": "/home/kavia/workspace/code-generation/ai-test-automation-platform-6921-6930/backend/main.py", "pattern": "/^allowed_origin_regex = r\"https?:\\\\\\/\\\\\\/([a-zA-Z0-9\\\\-]+\\\\.)*cloud\\\\.kavia\\\\.ai(:\\\\d+)?\"$/", "language": "Python", "kind": "variable"}, {"_type": "tag", "name": "allowed_origins", "path": "/home/kavia/workspace/code-generation/ai-test-automation-platform-6921-6930/backend/main.py", "pattern": "/^allowed_origins = [$/", "language": "Python", "kind": "variable"}, {"_type": "tag", "name": "app", "path": "/home/kavia/workspace/code-generation/ai-test-automation-platform-6921-6930/backend/main.py", "pattern": "/^app = FastAPI($/", "language": "Python", "kind": "variable"}, {"_type": "tag", "name": "connect_args", "path": "/home/kavia/workspace/code-generation/ai-test-automation-platform-6921-6930/backend/main.py", "pattern": "/^connect_args = {\"check_same_thread\": False} if DATABASE_URL.startswith(\"sqlite\") else {}$/", "language": "Python", "kind": "variable"}, {"_type": "tag", "name": "create_test", "path": "/home/kavia/workspace/code-generation/ai-test-automation-platform-6921-6930/backend/main.py", "pattern": "/^def create_test(payload: TestCaseCreate, session: Session = Depends(get_session)):$/", "language": "Python", "kind": "function", "signature": "(payload: TestCaseCreate, session: Session = Depends(get_session))"}, {"_type": "tag", "name": "created_at", "path": "/home/kavia/workspace/code-generation/ai-test-automation-platform-6921-6930/backend/main.py", "pattern": "/^    created_at: datetime = Field(default_factory=datetime.utcnow, description=\"Creation timestam/", "language": "Python", "typeref": "typename:datetime", "kind": "variable", "scope": "TestCase", "scopeKind": "class"}, {"_type": "tag", "name": "created_at", "path": "/home/kavia/workspace/code-generation/ai-test-automation-platform-6921-6930/backend/main.py", "pattern": "/^    created_at: datetime = SQLField(default_factory=datetime.utcnow, nullable=False)$/", "language": "Python", "typeref": "typename:datetime", "kind": "variable", "scope": "TestCaseORM", "scopeKind": "class"}, {"_type": "tag", "name": "delete_test", "path": "/home/kavia/workspace/code-generation/ai-test-automation-platform-6921-6930/backend/main.py", "pattern": "/^def delete_test(test_id: int, session: Session = Depends(get_session)):$/", "language": "Python", "kind": "function", "signature": "(test_id: int, session: Session = Depends(get_session))"}, {"_type": "tag", "name": "duration_ms", "path": "/home/kavia/workspace/code-generation/ai-test-automation-platform-6921-6930/backend/main.py", "pattern": "/^    duration_ms: int = Field(..., description=\"Execution time in ms\")$/", "language": "Python", "typeref": "typename:int", "kind": "variable", "scope": "RunResult", "scopeKind": "class"}, {"_type": "tag", "name": "engine", "path": "/home/kavia/workspace/code-generation/ai-test-automation-platform-6921-6930/backend/main.py", "pattern": "/^engine = create_engine(DATABASE_URL, echo=False, connect_args=connect_args)$/", "language": "Python", "kind": "variable"}, {"_type": "tag", "name": "get_session", "path": "/home/kavia/workspace/code-generation/ai-test-automation-platform-6921-6930/backend/main.py", "pattern": "/^def get_session():$/", "language": "Python", "kind": "function", "signature": "()"}, {"_type": "tag", "name": "health", "path": "/home/kavia/workspace/code-generation/ai-test-automation-platform-6921-6930/backend/main.py", "pattern": "/^def health():$/", "language": "Python", "kind": "function", "signature": "()"}, {"_type": "tag", "name": "id", "path": "/home/kavia/workspace/code-generation/ai-test-automation-platform-6921-6930/backend/main.py", "pattern": "/^    id: Optional[int] = SQLField(default=None, primary_key=True)$/", "language": "Python", "typeref": "typename:Optional[int]", "kind": "variable", "scope": "TestCaseORM", "scopeKind": "class"}, {"_type": "tag", "name": "id", "path": "/home/kavia/workspace/code-generation/ai-test-automation-platform-6921-6930/backend/main.py", "pattern": "/^    id: int = Field(..., description=\"Test case id\")$/", "language": "Python", "typeref": "typename:int", "kind": "variable", "scope": "RunResult", "scopeKind": "class"}, {"_type": "tag", "name": "id", "path": "/home/kavia/workspace/code-generation/ai-test-automation-platform-6921-6930/backend/main.py", "pattern": "/^    id: int = Field(..., description=\"Unique identifier of the test case\")$/", "language": "Python", "typeref": "typename:int", "kind": "variable", "scope": "TestCase", "scopeKind": "class"}, {"_type": "tag", "name": "ids", "path": "/home/kavia/workspace/code-generation/ai-test-automation-platform-6921-6930/backend/main.py", "pattern": "/^    ids: List[int] = Field(..., description=\"IDs of test cases to execute\")$/", "language": "Python", "typeref": "typename:List[int]", "kind": "variable", "scope": "RunRequest", "scopeKind": "class"}, {"_type": "tag", "name": "list_tests", "path": "/home/kavia/workspace/code-generation/ai-test-automation-platform-6921-6930/backend/main.py", "pattern": "/^def list_tests(session: Session = Depends(get_session)):$/", "language": "Python", "kind": "function", "signature": "(session: Session = Depends(get_session))"}, {"_type": "tag", "name": "name", "path": "/home/kavia/workspace/code-generation/ai-test-automation-platform-6921-6930/backend/main.py", "pattern": "/^    name: Optional[str] = Field(None, description=\"Name of the test case\")$/", "language": "Python", "typeref": "typename:Optional[str]", "kind": "variable", "scope": "TestCaseUpdate", "scopeKind": "class"}, {"_type": "tag", "name": "name", "path": "/home/kavia/workspace/code-generation/ai-test-automation-platform-6921-6930/backend/main.py", "pattern": "/^    name: str = Field(..., description=\"Name of the test case\")$/", "language": "Python", "typeref": "typename:str", "kind": "variable", "scope": "TestCase", "scopeKind": "class"}, {"_type": "tag", "name": "name", "path": "/home/kavia/workspace/code-generation/ai-test-automation-platform-6921-6930/backend/main.py", "pattern": "/^    name: str = Field(..., description=\"Name of the test case\")$/", "language": "Python", "typeref": "typename:str", "kind": "variable", "scope": "TestCaseCreate", "scopeKind": "class"}, {"_type": "tag", "name": "name", "path": "/home/kavia/workspace/code-generation/ai-test-automation-platform-6921-6930/backend/main.py", "pattern": "/^    name: str = Field(..., description=\"Test case name\")$/", "language": "Python", "typeref": "typename:str", "kind": "variable", "scope": "RunResult", "scopeKind": "class"}, {"_type": "tag", "name": "on_startup", "path": "/home/kavia/workspace/code-generation/ai-test-automation-platform-6921-6930/backend/main.py", "pattern": "/^def on_startup():$/", "language": "Python", "kind": "function", "signature": "()"}, {"_type": "tag", "name": "run_tests", "path": "/home/kavia/workspace/code-generation/ai-test-automation-platform-6921-6930/backend/main.py", "pattern": "/^def run_tests(req: RunRequest, session: Session = Depends(get_session)):$/", "language": "Python", "kind": "function", "signature": "(req: RunRequest, session: Session = Depends(get_session))"}, {"_type": "tag", "name": "status", "path": "/home/kavia/workspace/code-generation/ai-test-automation-platform-6921-6930/backend/main.py", "pattern": "/^    status: str = Field(..., description=\"pass or fail\")$/", "language": "Python", "typeref": "typename:str", "kind": "variable", "scope": "RunResult", "scopeKind": "class"}, {"_type": "tag", "name": "steps", "path": "/home/kavia/workspace/code-generation/ai-test-automation-platform-6921-6930/backend/main.py", "pattern": "/^    steps: List[str] = Field(default_factory=list, description=\"List of steps\")$/", "language": "Python", "typeref": "typename:List[str]", "kind": "variable", "scope": "TestCase", "scopeKind": "class"}, {"_type": "tag", "name": "steps", "path": "/home/kavia/workspace/code-generation/ai-test-automation-platform-6921-6930/backend/main.py", "pattern": "/^    steps: List[str] = Field(default_factory=list, description=\"List of steps\")$/", "language": "Python", "typeref": "typename:List[str]", "kind": "variable", "scope": "TestCaseCreate", "scopeKind": "class"}, {"_type": "tag", "name": "steps", "path": "/home/kavia/workspace/code-generation/ai-test-automation-platform-6921-6930/backend/main.py", "pattern": "/^    steps: Optional[List[str]] = Field(None, description=\"List of steps\")$/", "language": "Python", "typeref": "typename:Optional[List[str]]", "kind": "variable", "scope": "TestCaseUpdate", "scopeKind": "class"}, {"_type": "tag", "name": "steps_json", "path": "/home/kavia/workspace/code-generation/ai-test-automation-platform-6921-6930/backend/main.py", "pattern": "/^    steps_json: str = SQLField(default=\"[]\", description=\"JSON array of steps\")$/", "language": "Python", "typeref": "typename:str", "kind": "variable", "scope": "TestCaseORM", "scopeKind": "class"}, {"_type": "tag", "name": "update_test", "path": "/home/kavia/workspace/code-generation/ai-test-automation-platform-6921-6930/backend/main.py", "pattern": "/^def update_test(test_id: int, payload: TestCaseUpdate, session: Session = Depends(get_session)):$/", "language": "Python", "kind": "function", "signature": "(test_id: int, payload: TestCaseUpdate, session: Session = Depends(get_session))"}], "hash": "16dfe6f69986db5e01625fab01ddd069", "format-version": 4, "code-base-name": "frontend", "filename": "backend/main.py", "fields": [{"name": "DATABASE_URL = _default_db_url()", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "allowed_origin_regex = r\"https?:\\\\\\/\\\\\\/([a-zA-Z0-9\\\\-]+\\\\.)*cloud\\\\.kavia\\\\.ai(:\\\\d+)?\"", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "allowed_origins = [", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "app = FastAPI(", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "connect_args = {\"check_same_thread\": False} if DATABASE_URL.startswith(\"sqlite\") else {}", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "datetime created_at", "scope": "TestCase", "scopeKind": "class", "description": "unavailable"}, {"name": "int duration_ms", "scope": "RunResult", "scopeKind": "class", "description": "unavailable"}, {"name": "engine = create_engine(DATABASE_URL, echo=False, connect_args=connect_args)", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "Optional[int] id", "scope": "TestCaseORM", "scopeKind": "class", "description": "unavailable"}, {"name": "int id", "scope": "RunResult", "scopeKind": "class", "description": "unavailable"}, {"name": "List[int] ids", "scope": "RunRequest", "scopeKind": "class", "description": "unavailable"}, {"name": "Optional[str] name", "scope": "TestCaseUpdate", "scopeKind": "class", "description": "unavailable"}, {"name": "str name", "scope": "TestCase", "scopeKind": "class", "description": "unavailable"}, {"name": "str status", "scope": "RunResult", "scopeKind": "class", "description": "unavailable"}, {"name": "List[str] steps", "scope": "TestCase", "scopeKind": "class", "description": "unavailable"}, {"name": "Optional[List[str]] steps", "scope": "TestCaseUpdate", "scopeKind": "class", "description": "unavailable"}, {"name": "str steps_json", "scope": "TestCaseORM", "scopeKind": "class", "description": "unavailable"}]}